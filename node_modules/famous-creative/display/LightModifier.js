/**
 * Modifier that contains a WebGL Light
 */
import Modifier from './Modifier';

export default class LightModifier extends Modifier {
  constructor(node, options = {}) {
    super(node, options);
    if (options.visible) {
      this.mesh = new FamousPlatform.webglRenderables.Mesh(this.node);
      this.mesh.setBaseColor('#ff0099');
      this.geometry = new FamousPlatform.webglGeometries.GeodesicSphere();
      this.mesh.setGeometry(this.geometry);
      this
        .setSizeModeAbsolute()
        .setAbsoluteSize(200, 200, 0)
        .setMountPoint(0.5, 0.5, 0.5)
        .setOrigin(0.5, 0.5, 0.5);
    }
    this.light = new FamousPlatform.webglRenderables[`${(options.type === 'ambient') ? 'Ambient' : 'Point'}Light`](this.node);
    this.light.setColor(options.color);
    if (options.position) this.setPosition(...options.position);
    if (options.rotation) this.setRotation(...options.rotation);
  }
}
