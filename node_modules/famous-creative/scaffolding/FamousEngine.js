const Compositor = FamousPlatform.renderers.Compositor;
const ThreadManager = FamousPlatform.renderers.ThreadManager;
const Engine = FamousPlatform.engine.Engine;
const Famous = FamousPlatform.core.Famous;

class FamousEngineInit {
  /**
   * Boilerplate code to setup the Famous Engine.
   * @method  constructor
   */
  constructor() {
    this._initialized = false;
  }

  init() {
    if (this._initialized) return;
    this._initialized = true;
    // TODO: temporary eslint fix until it gets rolled into platform as a default
    /*eslint-disable */
    FamousPlatform.stylesheets;
    /*eslint-enable */

    // Boilerplate
    /*eslint-disable */
    // let compositor = new Compositor();
    // let engine = new Engine();
    // let threadmanger = new ThreadManager(Famous.getChannel(), compositor, engine);
    /*eslint-enable */

    // TODO: temporary fix until we get an update of famous > 20150504 that works
    /*eslint-disable */
    let compositor = new Compositor();
    let threadmanger = new ThreadManager(Famous, compositor);
    let engine = new FamousPlatform.engine();
    engine.update(threadmanger);
    /*eslint-enable */
    // END: temporary fix
  }
}

let FamousEngine = new FamousEngineInit();

export default FamousEngine;
